<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Test API - TAXIA CIMCO</title>
</head>
<body>
  <h1>Test API TAXIA CIMCO</h1>

  <button onclick="registrarConductor()">Registrar Conductor</button>
  <button onclick="registrarPasajero()">Registrar Pasajero</button>
  <button onclick="solicitarServicio()">Solicitar Servicio</button>
  <button onclick="listarServicios()">Listar Servicios</button>

  <pre id="output"></pre>

  <script>
    const API_URL = "http://localhost:5001/tu-proyecto/us-central1/app"; // âš¡ ajusta segÃºn tu hosting

    async function registrarConductor() {
      const res = await fetch(`${API_URL}/registrarConductor`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          email: "conductor@test.com",
          nombre: "Juan PÃ©rez",
          password: "123456",
          telefono: "3001234567",
          cedula: "123456789",
          tipoVehiculo: "Moto",
          placa: "ABC123",
          numeroInterno: "01",
          cooperativa: "CoopTaxi"
        })
      });
      document.getElementById("output").textContent = JSON.stringify(await res.json(), null, 2);
    }

    async function registrarPasajero() {
      const res = await fetch(`${API_URL}/registrarPasajero`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          email: "pasajero@test.com",
          nombre: "Carlos LÃ³pez",
          telefono: "3017654321",
          direccion_recogida: "Calle 123 #45-67"
        })
      });
      document.getElementById("output").textContent = JSON.stringify(await res.json(), null, 2);
    }

    async function solicitarServicio() {
      const res = await fetch(`${API_URL}/solicitarServicio`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          pasajeroId: "ID_DEL_PASAJERO", // reemplaza con un id real de Firestore
          origen: "Barrio Centro",
          destino: "Terminal de Transporte"
        })
      });
      document.getElementById("output").textContent = JSON.stringify(await res.json(), null, 2);
    }

    async function listarServicios() {
      const res = await fetch(`${API_URL}/listarServicios`);
      document.getElementById("output").textContent = JSON.stringify(await res.json(), null, 2);
    }
  </script>
<!--  Botón oculto solo para desarrollo -->
<button id="dev-clean-cache" style="display:none;position:fixed;bottom:10px;right:10px;z-index:9999;"></button>
<script>
document.addEventListener("keydown", async (e) => {
  if (e.ctrlKey && e.altKey && e.key.toLowerCase() === "l") {
    const regs = await navigator.serviceWorker.getRegistrations();
    for (const reg of regs) await reg.unregister();
    const names = await caches.keys();
    for (const n of names) await caches.delete(n);
    alert(" Caché y Service Workers eliminados.\nRecarga la página (Ctrl + F5).");
  }
});
</script>
<script src="/js/version-footer.js"></script>
</body>
</html>



